<?php


/**
 * Skeleton subclass for representing a row from the 'company' table.
 *
 * 
 *
 * This class was autogenerated by Propel 1.4.2 on:
 *
 * Mon Jul 20 16:18:50 2015
 *
 * You should add additional methods to this class to meet the
 * application requirements.  This class will only be generated as
 * long as it does not already exist in the output directory.
 *
 * @package    lib.model
 */
class Company extends BaseCompany {

  public function getSetting($key, $default = '') {
    $c = new Criteria;
    $c->add(SettingPeer::COMPANY_ID, $this->getId());
    $c->add(SettingPeer::SKEY, $key);
    $setting = SettingPeer::doSelectOne($c);
    if ($setting) {
      return $setting->getSvalue();
    }
    return $default;

  }

  public function setSetting($key, $value) {
    $c = new Criteria;
    $c->add(SettingPeer::COMPANY_ID, $this->getId());
    $c->add(SettingPeer::SKEY, $key);
    $setting = SettingPeer::doSelectOne($c);
    if (!$setting) {
      $setting = new Setting;
      $setting->setCompanyId($this->getId());
      $setting->setSkey($key);
    }
    $setting->setSvalue($value);
    $setting->save();
  }

  public function getConnection($force = false)
  {
    static $conn = null;
    if (!$conn || $force) {
      $c = new Criteria;
      $c->add(ConnectionPeer::COMPANY_ID, $this->getId());
      $c->add(ConnectionPeer::ADAPTER, 'onlineafspraken');
      $conn = ConnectionPeer::doSelectOne($c);
      if (!$conn) {
        $conn = new Connection;
        $conn->setCompanyId($this->getId());
        $conn->setAdapter('onlineafspraken');
        $conn->save();
      }
    }
    return $conn;
  }
} // Company
